<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hootool - Professional Multi-Tool Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: #F8F9FA;
            color: #1A1A1A;
            min-height: 100vh;
            overflow-x: hidden;
            margin: 0;
        }

        /* Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 260px;
            right: 0;
            height: 70px;
            background: #FFFFFF;
            border-bottom: 1px solid #E0E0E0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 30px;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .header-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1A1A1A;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 260px;
            height: 100vh;
            background: #FFFFFF;
            border-right: 1px solid #E0E0E0;
            padding: 30px 0;
            overflow-y: auto;
            z-index: 101;
        }

        .logo {
            padding: 0 25px 30px;
            font-size: 2rem;
            font-weight: 700;
            color: #0066CC;
            letter-spacing: -0.5px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            color: #666;
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: #F8F9FA;
            color: #0066CC;
        }

        .nav-item.active {
            background: #E3F2FD;
            color: #0066CC;
            border-left-color: #0066CC;
            font-weight: 500;
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-right: 15px;
            width: 30px;
            text-align: center;
        }

        .nav-label {
            font-size: 0.95rem;
        }

        /* Main Content */
        .main-content {
            margin-left: 260px;
            margin-top: 70px;
            padding: 40px;
            min-height: calc(100vh - 70px);
        }

        .tool-container {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tool-container.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card Styles */
        .card {
            background: #FFFFFF;
            border-radius: 12px;
            padding: 30px;
            border: 1px solid #E0E0E0;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1A1A1A;
            margin-bottom: 20px;
        }

        /* Drop Zone */
        .drop-zone {
            border: 2px dashed #C0C0C0;
            border-radius: 12px;
            padding: 50px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #FAFAFA;
            margin-bottom: 25px;
        }

        .drop-zone:hover {
            border-color: #0066CC;
            background: #F0F7FF;
        }

        .drop-zone.drag-over {
            border-color: #0066CC;
            background: #E3F2FD;
            border-style: solid;
        }

        .drop-zone-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .drop-zone-text {
            font-size: 1.1rem;
            color: #1A1A1A;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .drop-zone-subtext {
            font-size: 0.9rem;
            color: #666;
        }

        /* File List */
        .file-list {
            margin-bottom: 25px;
            max-height: 400px;
            overflow-y: auto;
        }

        .file-list::-webkit-scrollbar {
            width: 8px;
        }

        .file-list::-webkit-scrollbar-track {
            background: #F0F0F0;
            border-radius: 4px;
        }

        .file-list::-webkit-scrollbar-thumb {
            background: #C0C0C0;
            border-radius: 4px;
        }

        .file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            background: #FAFAFA;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }

        .file-item:hover {
            background: #F0F7FF;
            border-color: #0066CC;
        }

        .file-name {
            font-size: 0.95rem;
            color: #1A1A1A;
            font-weight: 500;
        }

        .file-size {
            font-size: 0.85rem;
            color: #666;
            margin-left: 15px;
        }

        .file-ext {
            display: inline-block;
            background: #E3F2FD;
            color: #0066CC;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 10px;
        }

        /* Input Section */
        .input-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .input-group {
            position: relative;
        }

        .input-label {
            display: block;
            font-size: 0.9rem;
            color: #333;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-field, select {
            width: 100%;
            padding: 12px 15px;
            background: #FFFFFF;
            border: 1px solid #D0D0D0;
            border-radius: 8px;
            color: #1A1A1A;
            font-size: 0.95rem;
            font-family: inherit;
            transition: all 0.2s ease;
            outline: none;
        }

        .input-field:focus, select:focus {
            border-color: #0066CC;
            box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
        }

        .input-field::placeholder {
            color: #999;
        }

        select {
            cursor: pointer;
        }

        /* Buttons */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: #0066CC;
            color: #FFFFFF;
        }

        .btn-primary:hover {
            background: #0052A3;
            box-shadow: 0 4px 12px rgba(0, 102, 204, 0.3);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #F0F0F0;
            color: #333;
        }

        .btn-secondary:hover {
            background: #E0E0E0;
        }

        .btn-success {
            background: #28A745;
            color: #FFFFFF;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-full {
            width: 100%;
        }

        .btn-group {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        /* Results Section */
        .results-section {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid #E0E0E0;
        }

        .result-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: #F0FFF4;
            border: 1px solid #28A745;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .result-item.warning {
            background: #FFF9E6;
            border-color: #FFC107;
        }

        .result-icon {
            font-size: 1.2rem;
            margin-right: 12px;
        }

        .result-text {
            font-size: 0.95rem;
            color: #1A1A1A;
        }

        .result-arrow {
            margin: 0 8px;
            color: #0066CC;
        }

        .summary {
            text-align: center;
            padding: 20px;
            background: #E3F2FD;
            border: 1px solid #0066CC;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 1.1rem;
            font-weight: 500;
            color: #0066CC;
        }

        /* Category Styles */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .category-item {
            padding: 20px;
            background: #FAFAFA;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            text-align: center;
        }

        .category-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .category-name {
            font-weight: 600;
            color: #1A1A1A;
            margin-bottom: 5px;
        }

        .category-count {
            font-size: 0.85rem;
            color: #666;
        }

        /* Preview Section */
        .preview-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .preview-box {
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }

        .preview-box img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 4px;
        }

        .preview-label {
            font-weight: 500;
            margin-bottom: 10px;
            color: #666;
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 18px;
            height: 18px;
            border: 2px solid #E0E0E0;
            border-top-color: #0066CC;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            margin-right: 8px;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Status Badge */
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-success {
            background: #D4EDDA;
            color: #155724;
        }

        .status-warning {
            background: #FFF3CD;
            color: #856404;
        }

        .status-info {
            background: #D1ECF1;
            color: #0C5460;
        }

        /* Messages */
        .message {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.95rem;
            border-left: 4px solid;
        }

        .message-error {
            background: #FEE;
            border-color: #DC3545;
            color: #721C24;
        }

        .message-success {
            background: #D4EDDA;
            border-color: #28A745;
            color: #155724;
        }

        .message-info {
            background: #D1ECF1;
            border-color: #0066CC;
            color: #0C5460;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            padding: 8px 12px;
            background: #1A1A1A;
            color: #FFF;
            border-radius: 6px;
            font-size: 0.85rem;
            white-space: nowrap;
            z-index: 1000;
        }

        /* Utility Classes */
        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .text-center { text-align: center; }
        .text-muted { color: #666; }

        .hidden {
            display: none !important;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 80px;
            }

            .nav-label {
                display: none;
            }

            .logo {
                font-size: 1.5rem;
                text-align: center;
                padding: 0 0 20px;
            }

            .header {
                left: 80px;
            }

            .main-content {
                margin-left: 80px;
                padding: 20px;
            }

            .input-section, .preview-section {
                grid-template-columns: 1fr;
            }

            .category-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">Hootool</div>
            <div class="nav-item active" data-tool="converter">
                <span class="nav-icon">üìÅ</span>
                <span class="nav-label">File Converter</span>
            </div>
            <div class="nav-item" data-tool="organizer">
                <span class="nav-icon">üìÇ</span>
                <span class="nav-label">File Organizer</span>
            </div>
            <div class="nav-item" data-tool="background">
                <span class="nav-icon">üñºÔ∏è</span>
                <span class="nav-label">Background Remover</span>
            </div>
            <div class="nav-item" data-tool="optimizer">
                <span class="nav-icon">üñ®Ô∏è</span>
                <span class="nav-label">Image Optimizer</span>
            </div>
            <div class="nav-item" data-tool="pdf">
                <span class="nav-icon">üìÑ</span>
                <span class="nav-label">PDF Merger</span>
            </div>
            <div class="nav-item" data-tool="text">
                <span class="nav-icon">üìù</span>
                <span class="nav-label">Text Converter</span>
            </div>
            <div class="nav-item" data-tool="watermark">
                <span class="nav-icon">üíß</span>
                <span class="nav-label">Watermark</span>
            </div>
            <div class="nav-item" data-tool="duplicate">
                <span class="nav-icon">üîç</span>
                <span class="nav-label">Duplicate Finder</span>
            </div>
            <div class="nav-item" data-tool="comparison">
                <span class="nav-icon">‚öñÔ∏è</span>
                <span class="nav-label">File Comparison</span>
            </div>
            <div class="nav-item" data-tool="metadata">
                <span class="nav-icon">üè∑Ô∏è</span>
                <span class="nav-label">Metadata Extractor</span>
            </div>
        </div>

        <!-- Header -->
        <div class="header">
            <h1 class="header-title" id="toolTitle">File Extension Converter</h1>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Tool 1: File Extension Converter -->
            <div class="tool-container active" id="tool-converter">
                <div class="card">
                    <div class="drop-zone" id="dropZone1">
                        <div class="drop-zone-icon">üìÅ</div>
                        <div class="drop-zone-text">Drop files here or click to browse</div>
                        <div class="drop-zone-subtext">Select files to convert</div>
                        <input type="file" id="fileInput1" multiple style="display: none;">
                    </div>

                    <div class="file-list hidden" id="fileList1"></div>

                    <div class="input-section">
                        <div class="input-group">
                            <label class="input-label">Detected Extension</label>
                            <input type="text" id="detectedExt" class="input-field" readonly placeholder="Auto-detected">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Convert To</label>
                            <select id="targetExt" class="input-field">
                                <option value="">Select format...</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn btn-primary btn-full" id="convertBtn1">
                        <span id="btnText1">Convert Files</span>
                    </button>

                    <div class="results-section hidden" id="resultsSection1"></div>
                </div>
            </div>

            <!-- Tool 2: File Organizer -->
            <div class="tool-container" id="tool-organizer">
                <div class="card">
                    <div class="drop-zone" id="dropZone2">
                        <div class="drop-zone-icon">üìÇ</div>
                        <div class="drop-zone-text">Drop files to organize</div>
                        <div class="drop-zone-subtext">Files will be categorized by type</div>
                        <input type="file" id="fileInput2" multiple style="display: none;">
                    </div>

                    <div class="file-list hidden" id="fileList2"></div>

                    <button class="btn btn-primary btn-full" id="organizeBtn">Organize Files</button>

                    <div class="results-section hidden" id="organizerResults">
                        <h3 class="card-title">üìÅ Organized Structure</h3>
                        <div class="category-grid" id="categoryGrid"></div>
                    </div>
                </div>
            </div>

            <!-- Tool 3: Background Remover -->
            <div class="tool-container" id="tool-background">
                <div class="card">
                    <div class="drop-zone" id="dropZone3">
                        <div class="drop-zone-icon">üñºÔ∏è</div>
                        <div class="drop-zone-text">Drop an image here</div>
                        <div class="drop-zone-subtext">Supported: JPG, PNG, GIF</div>
                        <input type="file" id="fileInput3" accept="image/*" style="display: none;">
                    </div>

                    <div class="hidden" id="bgOptions">
                        <div class="input-group">
                            <label class="input-label">Background Action</label>
                            <select id="bgAction" class="input-field">
                                <option value="transparent">Remove (Transparent)</option>
                                <option value="color">Replace with Color</option>
                                <option value="blur">Blur Background</option>
                            </select>
                        </div>

                        <div class="input-group hidden" id="colorPicker">
                            <label class="input-label">Background Color</label>
                            <input type="color" id="bgColor" class="input-field" value="#FFFFFF">
                        </div>

                        <button class="btn btn-primary btn-full mt-20" id="processBgBtn">Process Image</button>
                    </div>

                    <div class="preview-section hidden" id="bgPreview">
                        <div class="preview-box">
                            <div class="preview-label">Original</div>
                            <img id="originalImg" alt="Original">
                        </div>
                        <div class="preview-box">
                            <div class="preview-label">Processed</div>
                            <canvas id="processedCanvas"></canvas>
                        </div>
                    </div>

                    <button class="btn btn-success btn-full mt-20 hidden" id="downloadBgBtn">Download Processed Image</button>
                </div>
            </div>

            <!-- Tool 4: Image Optimizer -->
            <div class="tool-container" id="tool-optimizer">
                <div class="card">
                    <div class="drop-zone" id="dropZone4">
                        <div class="drop-zone-icon">üñ®Ô∏è</div>
                        <div class="drop-zone-text">Drop images to optimize</div>
                        <div class="drop-zone-subtext">Batch resize and compress</div>
                        <input type="file" id="fileInput4" multiple accept="image/*" style="display: none;">
                    </div>

                    <div class="file-list hidden" id="fileList4"></div>

                    <div class="hidden" id="optimizerOptions">
                        <div class="input-section">
                            <div class="input-group">
                                <label class="input-label">Width (px)</label>
                                <input type="number" id="resizeWidth" class="input-field" placeholder="Leave blank to maintain">
                            </div>
                            <div class="input-group">
                                <label class="input-label">Height (px)</label>
                                <input type="number" id="resizeHeight" class="input-field" placeholder="Leave blank to maintain">
                            </div>
                        </div>

                        <div class="input-group">
                            <label class="input-label">Quality: <span id="qualityValue">80</span>%</label>
                            <input type="range" id="quality" min="10" max="100" value="80" style="width: 100%;">
                        </div>

                        <button class="btn btn-primary btn-full mt-20" id="optimizeBtn">Optimize Images</button>
                    </div>

                    <div class="results-section hidden" id="optimizerResults"></div>
                </div>
            </div>

            <!-- Tool 5: PDF Merger -->
            <div class="tool-container" id="tool-pdf">
                <div class="card">
                    <div class="drop-zone" id="dropZone5">
                        <div class="drop-zone-icon">üìÑ</div>
                        <div class="drop-zone-text">Drop PDF files or images</div>
                        <div class="drop-zone-subtext">Merge into single PDF</div>
                        <input type="file" id="fileInput5" multiple accept=".pdf,image/*" style="display: none;">
                    </div>

                    <div class="file-list hidden" id="fileList5"></div>

                    <button class="btn btn-primary btn-full" id="mergePdfBtn">Merge to PDF</button>

                    <div class="results-section hidden" id="pdfResults">
                        <div class="message message-success">‚úì PDF merged successfully!</div>
                        <button class="btn btn-success btn-full" id="downloadPdfBtn">Download Merged PDF</button>
                    </div>
                </div>
            </div>

            <!-- Tool 6: Text Converter -->
            <div class="tool-container" id="tool-text">
                <div class="card">
                    <div class="input-group">
                        <label class="input-label">Input Format</label>
                        <select id="textFrom" class="input-field">
                            <option value="json">JSON</option>
                            <option value="xml">XML</option>
                            <option value="csv">CSV</option>
                            <option value="txt">Plain Text</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label class="input-label">Input Text</label>
                        <textarea id="textInput" class="input-field" rows="10" placeholder="Paste your text here..."></textarea>
                    </div>

                    <div class="input-group">
                        <label class="input-label">Convert To</label>
                        <select id="textTo" class="input-field">
                            <option value="json">JSON</option>
                            <option value="xml">XML</option>
                            <option value="csv">CSV</option>
                            <option value="txt">Plain Text</option>
                        </select>
                    </div>

                    <button class="btn btn-primary btn-full" id="convertTextBtn">Convert Text</button>

                    <div class="hidden" id="textOutput">
                        <div class="input-group mt-20">
                            <label class="input-label">Output</label>
                            <textarea id="textResult" class="input-field" rows="10" readonly></textarea>
                        </div>
                        <button class="btn btn-success btn-full mt-20" id="downloadTextBtn">Download</button>
                    </div>
                </div>
            </div>

            <!-- Tool 7: Watermark Generator -->
            <div class="tool-container" id="tool-watermark">
                <div class="card">
                    <div class="drop-zone" id="dropZone7">
                        <div class="drop-zone-icon">üíß</div>
                        <div class="drop-zone-text">Drop images to watermark</div>
                        <div class="drop-zone-subtext">Add text watermark</div>
                        <input type="file" id="fileInput7" multiple accept="image/*" style="display: none;">
                    </div>

                    <div class="file-list hidden" id="fileList7"></div>

                    <div class="hidden" id="watermarkOptions">
                        <div class="input-group">
                            <label class="input-label">Watermark Text</label>
                            <input type="text" id="watermarkText" class="input-field" placeholder="¬© Your Name">
                        </div>

                        <div class="input-section">
                            <div class="input-group">
                                <label class="input-label">Position</label>
                                <select id="watermarkPos" class="input-field">
                                    <option value="bottom-right">Bottom Right</option>
                                    <option value="bottom-left">Bottom Left</option>
                                    <option value="top-right">Top Right</option>
                                    <option value="top-left">Top Left</option>
                                    <option value="center">Center</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label class="input-label">Opacity: <span id="opacityValue">50</span>%</label>
                                <input type="range" id="watermarkOpacity" min="10" max="100" value="50" style="width: 100%;">
                            </div>
                        </div>

                        <button class="btn btn-primary btn-full" id="applyWatermarkBtn">Apply Watermark</button>
                    </div>

                    <div class="results-section hidden" id="watermarkResults"></div>
                </div>
            </div>

            <!-- Tool 8: Duplicate Finder -->
            <div class="tool-container" id="tool-duplicate">
                <div class="card">
                    <div class="drop-zone" id="dropZone8">
                        <div class="drop-zone-icon">üîç</div>
                        <div class="drop-zone-text">Drop files to check for duplicates</div>
                        <div class="drop-zone-subtext">Find identical files</div>
                        <input type="file" id="fileInput8" multiple style="display: none;">
                    </div>

                    <div class="file-list hidden" id="fileList8"></div>

                    <button class="btn btn-primary btn-full" id="findDuplicatesBtn">Find Duplicates</button>

                    <div class="results-section hidden" id="duplicateResults"></div>
                </div>
            </div>

            <!-- Tool 9: File Comparison -->
            <div class="tool-container" id="tool-comparison">
                <div class="card">
                    <div class="input-section">
                        <div class="input-group">
                            <label class="input-label">File 1</label>
                            <textarea id="compareFile1" class="input-field" rows="12" placeholder="Paste first file content..."></textarea>
                        </div>
                        <div class="input-group">
                            <label class="input-label">File 2</label>
                            <textarea id="compareFile2" class="input-field" rows="12" placeholder="Paste second file content..."></textarea>
                        </div>
                    </div>

                    <button class="btn btn-primary btn-full" id="compareBtn">Compare Files</button>

                    <div class="results-section hidden" id="comparisonResults"></div>
                </div>
            </div>

            <!-- Tool 10: Metadata Extractor -->
            <div class="tool-container" id="tool-metadata">
                <div class="card">
                    <div class="drop-zone" id="dropZone10">
                        <div class="drop-zone-icon">üè∑Ô∏è</div>
                        <div class="drop-zone-text">Drop a file to extract metadata</div>
                        <div class="drop-zone-subtext">View file properties</div>
                        <input type="file" id="fileInput10" style="display: none;">
                    </div>

                    <div class="results-section hidden" id="metadataResults"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        // Tool Navigation
        const navItems = document.querySelectorAll('.nav-item');
        const toolContainers = document.querySelectorAll('.tool-container');
        const toolTitle = document.getElementById('toolTitle');

        const toolTitles = {
            'converter': 'File Extension Converter',
            'organizer': 'File Organizer',
            'background': 'Background Remover',
            'optimizer': 'Image Optimizer',
            'pdf': 'PDF Merger',
            'text': 'Text Converter',
            'watermark': 'Watermark Generator',
            'duplicate': 'Duplicate File Finder',
            'comparison': 'File Comparison',
            'metadata': 'Metadata Extractor'
        };

        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const tool = item.dataset.tool;
                
                // Update active nav
                navItems.forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
                
                // Show active tool
                toolContainers.forEach(container => container.classList.remove('active'));
                document.getElementById('tool-' + tool).classList.add('active');
                
                // Update title
                toolTitle.textContent = toolTitles[tool];
            });
        });

        // File Categories
        const FILE_CATEGORIES = {
            'Images': ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.svg', '.ico', '.webp'],
            'Documents': ['.pdf', '.doc', '.docx', '.txt', '.xlsx', '.ppt', '.pptx'],
            'Videos': ['.mp4', '.avi', '.mov', '.mkv', '.flv', '.wmv'],
            'Audio': ['.mp3', '.wav', '.flac', '.aac', '.m4a', '.wma'],
            'Archives': ['.zip', '.rar', '.7z', '.tar', '.gz', '.iso'],
            'Code': ['.py', '.js', '.java', '.cpp', '.html', '.css', '.sql']
        };

        const FORMAT_CONVERSIONS = {
            'image': ['.jpg', '.png', '.gif', '.bmp', '.webp', '.pdf'],
            'document': ['.pdf', '.txt'],
            'text': ['.txt', '.json', '.xml', '.csv']
        };

        // Global variables
        let uploadedFiles1 = [];
        let convertedFiles1 = [];
        let uploadedFiles2 = [];
        let uploadedFiles4 = [];
        let uploadedFiles5 = [];
        let uploadedFiles7 = [];
        let uploadedFiles8 = []

        // ===== TOOL 1: FILE CONVERTER =====
        const dropZone1 = document.getElementById('dropZone1');
        const fileInput1 = document.getElementById('fileInput1');
        const fileList1 = document.getElementById('fileList1');
        const detectedExt = document.getElementById('detectedExt');
        const targetExt = document.getElementById('targetExt');
        const convertBtn1 = document.getElementById('convertBtn1');
        const btnText1 = document.getElementById('btnText1');
        const resultsSection1 = document.getElementById('resultsSection1');

        // Setup drop zones
        function setupDropZone(dropZone, fileInput, handler) {
            dropZone.addEventListener('click', () => fileInput.click());
            
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropZone.classList.add('drag-over');
            });
            
            dropZone.addEventListener('dragleave', () => {
                dropZone.classList.remove('drag-over');
            });
            
            dropZone.addEventListener('drop', (e) => {
                e.preventDefault();
                dropZone.classList.remove('drag-over');
                handler(e.dataTransfer.files);
            });
            
            fileInput.addEventListener('change', (e) => {
                handler(e.target.files);
            });
        }

        // Tool 1: File Converter
        setupDropZone(dropZone1, fileInput1, handleFiles1);

        function handleFiles1(files) {
            uploadedFiles1 = Array.from(files);
            displayFiles1();
            resultsSection1.classList.add('hidden');
            resultsSection1.innerHTML = '';
            
            if (uploadedFiles1.length > 0) {
                const ext = getFileExtension(uploadedFiles1[0].name);
                detectedExt.value = ext;
                populateTargetFormats(ext);
            }
        }

        function getFileExtension(filename) {
            return filename.substring(filename.lastIndexOf('.')).toLowerCase();
        }

        function populateTargetFormats(ext) {
            targetExt.innerHTML = '<option value="">Select format...</option>';
            
            let formats = [];
            if (['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.webp', '.svg'].includes(ext)) {
                formats = FORMAT_CONVERSIONS.image;
            } else if (['.txt', '.json', '.xml', '.csv'].includes(ext)) {
                formats = FORMAT_CONVERSIONS.text;
            } else if (['.pdf', '.doc', '.docx'].includes(ext)) {
                formats = FORMAT_CONVERSIONS.document;
            } else {
                formats = ['.pdf', '.txt', '.zip'];
            }
            
            formats.forEach(format => {
                if (format !== ext) {
                    const option = document.createElement('option');
                    option.value = format;
                    option.textContent = format.toUpperCase();
                    targetExt.appendChild(option);
                }
            });
        }

        function displayFiles1() {
            if (uploadedFiles1.length === 0) {
                fileList1.classList.add('hidden');
                return;
            }

            fileList1.classList.remove('hidden');
            fileList1.innerHTML = '<h3 class="card-title">üìÑ Uploaded Files</h3>';

            uploadedFiles1.forEach((file) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';

                const ext = getFileExtension(file.name);
                fileItem.innerHTML = `
                    <div>
                        <span class="file-name">${file.name}</span>
                        <span class="file-ext">${ext.toUpperCase()}</span>
                        <span class="file-size">${formatFileSize(file.size)}</span>
                    </div>
                `;
                fileList1.appendChild(fileItem);
            });
        }

        convertBtn1.addEventListener('click', async () => {
            if (uploadedFiles1.length === 0) {
                showMessage1('error', '‚ùå Please upload files first!');
                return;
            }

            const toExt = targetExt.value;
            if (!toExt) {
                showMessage1('error', '‚ùå Please select target format!');
                return;
            }

            convertBtn1.disabled = true;
            btnText1.innerHTML = '<div class="loading-spinner"></div> Converting...';

            await new Promise(resolve => setTimeout(resolve, 800));

            // Special handling for image to PDF
            if (toExt === '.pdf' && uploadedFiles1[0].type.startsWith('image/')) {
                await convertImagesToPDF();
            } else {
                convertFiles1(toExt);
            }

            convertBtn1.disabled = false;
            btnText1.textContent = 'Convert Files';
        });

        async function convertImagesToPDF() {
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF();
            
            for (let i = 0; i < uploadedFiles1.length; i++) {
                const file = uploadedFiles1[i];
                if (file.type.startsWith('image/')) {
                    const imgData = await readFileAsDataURL(file);
                    
                    if (i > 0) pdf.addPage();
                    
                    const img = new Image();
                    await new Promise((resolve) => {
                        img.onload = resolve;
                        img.src = imgData;
                    });
                    
                    const pageWidth = pdf.internal.pageSize.getWidth();
                    const pageHeight = pdf.internal.pageSize.getHeight();
                    const imgWidth = img.width;
                    const imgHeight = img.height;
                    const ratio = Math.min(pageWidth / imgWidth, pageHeight / imgHeight);
                    const w = imgWidth * ratio;
                    const h = imgHeight * ratio;
                    
                    pdf.addImage(imgData, 'JPEG', 0, 0, w, h);
                }
            }
            
            const pdfBlob = pdf.output('blob');
            const pdfFile = new File([pdfBlob], 'converted.pdf', { type: 'application/pdf' });
            convertedFiles1 = [pdfFile];
            
            displayResults1([{
                success: true,
                original: uploadedFiles1.map(f => f.name).join(', '),
                converted: 'converted.pdf'
            }]);
        }

        function readFileAsDataURL(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.readAsDataURL(file);
            });
        }

        function convertFiles1(toExt) {
            convertedFiles1 = [];
            const results = [];

            uploadedFiles1.forEach(file => {
                const fileName = file.name;
                const fromExt = getFileExtension(fileName);
                const newFileName = fileName.slice(0, -fromExt.length) + toExt;
                
                const convertedFile = new File([file], newFileName, { type: file.type });
                convertedFiles1.push(convertedFile);
                
                results.push({
                    success: true,
                    original: fileName,
                    converted: newFileName
                });
            });

            displayResults1(results);
        }

        function displayResults1(results) {
            resultsSection1.classList.remove('hidden');
            resultsSection1.innerHTML = '<h3 class="card-title">‚ú® Conversion Results</h3>';

            let successCount = 0;

            results.forEach((result) => {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                resultItem.innerHTML = `
                    <span class="result-icon">‚úì</span>
                    <span class="result-text">
                        ${result.original}
                        <span class="result-arrow">‚Üí</span>
                        ${result.converted}
                    </span>
                `;
                successCount++;
                resultsSection1.appendChild(resultItem);
            });

            if (successCount > 0) {
                const summary = document.createElement('div');
                summary.className = 'summary';
                summary.textContent = `üéâ ${successCount} file(s) converted successfully!`;
                resultsSection1.appendChild(summary);

                const btnGroup = document.createElement('div');
                btnGroup.className = 'btn-group';
                btnGroup.innerHTML = `
                    <button class="btn btn-success" onclick="downloadAllFiles1()">‚¨á Download All</button>
                    <button class="btn btn-secondary" onclick="resetConverter1()">üîÑ Reset</button>
                `;
                resultsSection1.appendChild(btnGroup);
            }
        }

        function showMessage1(type, text) {
            const existing = document.querySelector('#tool-converter .message');
            if (existing) existing.remove();

            const message = document.createElement('div');
            message.className = `message message-${type}`;
            message.textContent = text;

            const card = document.querySelector('#tool-converter .card');
            card.insertBefore(message, card.firstChild);

            setTimeout(() => message.remove(), 5000);
        }

        window.downloadAllFiles1 = function() {
            convertedFiles1.forEach(file => {
                const url = URL.createObjectURL(file);
                const a = document.createElement('a');
                a.href = url;
                a.download = file.name;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
        };

        window.resetConverter1 = function() {
            uploadedFiles1 = [];
            convertedFiles1 = [];
            fileInput1.value = '';
            detectedExt.value = '';
            targetExt.innerHTML = '<option value="">Select format...</option>';
            fileList1.classList.add('hidden');
            resultsSection1.classList.add('hidden');
        };

        // ===== TOOL 2: FILE ORGANIZER =====
        const dropZone2 = document.getElementById('dropZone2');
        const fileInput2 = document.getElementById('fileInput2');
        const fileList2 = document.getElementById('fileList2');
        const organizeBtn = document.getElementById('organizeBtn');
        const organizerResults = document.getElementById('organizerResults');
        const categoryGrid = document.getElementById('categoryGrid');

        setupDropZone(dropZone2, fileInput2, handleFiles2);

        function handleFiles2(files) {
            uploadedFiles2 = Array.from(files);
            displayFiles2();
            organizerResults.classList.add('hidden');
        }

        function displayFiles2() {
            if (uploadedFiles2.length === 0) {
                fileList2.classList.add('hidden');
                return;
            }

            fileList2.classList.remove('hidden');
            fileList2.innerHTML = '<h3 class="card-title">üìÑ Files to Organize (' + uploadedFiles2.length + ')</h3>';

            uploadedFiles2.forEach((file) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                const ext = getFileExtension(file.name);
                fileItem.innerHTML = `
                    <div>
                        <span class="file-name">${file.name}</span>
                        <span class="file-ext">${ext.toUpperCase()}</span>
                    </div>
                `;
                fileList2.appendChild(fileItem);
            });
        }

        organizeBtn.addEventListener('click', () => {
            if (uploadedFiles2.length === 0) {
                alert('Please upload files first!');
                return;
            }
            organizeFiles();
        });

        function organizeFiles() {
            const organized = {};
            
            uploadedFiles2.forEach(file => {
                const ext = getFileExtension(file.name);
                let category = 'Others';
                
                for (const [cat, extensions] of Object.entries(FILE_CATEGORIES)) {
                    if (extensions.includes(ext)) {
                        category = cat;
                        break;
                    }
                }
                
                if (!organized[category]) organized[category] = [];
                organized[category].push(file.name);
            });
            
            displayOrganizedFiles(organized);
        }

        function displayOrganizedFiles(organized) {
            organizerResults.classList.remove('hidden');
            categoryGrid.innerHTML = '';
            
            const categoryIcons = {
                'Images': 'üñºÔ∏è',
                'Documents': 'üìÑ',
                'Videos': 'üé•',
                'Audio': 'üéµ',
                'Archives': 'üóÑÔ∏è',
                'Code': 'üíª',
                'Others': 'üìÅ'
            };
            
            for (const [category, files] of Object.entries(organized)) {
                const categoryItem = document.createElement('div');
                categoryItem.className = 'category-item';
                categoryItem.innerHTML = `
                    <div class="category-icon">${categoryIcons[category] || 'üìÅ'}</div>
                    <div class="category-name">${category}</div>
                    <div class="category-count">${files.length} file(s)</div>
                `;
                categoryItem.title = files.join('\n');
                categoryGrid.appendChild(categoryItem);
            }
        }

        // ===== TOOL 3: BACKGROUND REMOVER =====
        const dropZone3 = document.getElementById('dropZone3');
        const fileInput3 = document.getElementById('fileInput3');
        const bgOptions = document.getElementById('bgOptions');
        const bgAction = document.getElementById('bgAction');
        const colorPicker = document.getElementById('colorPicker');
        const processBgBtn = document.getElementById('processBgBtn');
        const bgPreview = document.getElementById('bgPreview');
        const originalImg = document.getElementById('originalImg');
        const processedCanvas = document.getElementById('processedCanvas');
        const downloadBgBtn = document.getElementById('downloadBgBtn');
        let currentImage = null;

        setupDropZone(dropZone3, fileInput3, handleBgImage);

        function handleBgImage(files) {
            if (files.length > 0 && files[0].type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    currentImage = new Image();
                    currentImage.onload = () => {
                        originalImg.src = e.target.result;
                        bgOptions.classList.remove('hidden');
                        bgPreview.classList.add('hidden');
                        downloadBgBtn.classList.add('hidden');
                    };
                    currentImage.src = e.target.result;
                };
                reader.readAsDataURL(files[0]);
            }
        }

        bgAction.addEventListener('change', () => {
            if (bgAction.value === 'color') {
                colorPicker.classList.remove('hidden');
            } else {
                colorPicker.classList.add('hidden');
            }
        });

        processBgBtn.addEventListener('click', () => {
            if (!currentImage) return;
            
            const canvas = processedCanvas;
            const ctx = canvas.getContext('2d');
            canvas.width = currentImage.width;
            canvas.height = currentImage.height;
            
            ctx.drawImage(currentImage, 0, 0);
            
            const action = bgAction.value;
            if (action === 'transparent') {
                applyTransparentBg(ctx, canvas);
            } else if (action === 'color') {
                applyColorBg(ctx, canvas);
            } else if (action === 'blur') {
                applyBlurBg(ctx, canvas);
            }
            
            bgPreview.classList.remove('hidden');
            downloadBgBtn.classList.remove('hidden');
        });

        function applyTransparentBg(ctx, canvas) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            // Find the most common background color (corners)
            const corners = [
                [0, 0],
                [canvas.width - 1, 0],
                [0, canvas.height - 1],
                [canvas.width - 1, canvas.height - 1]
            ];
            
            let bgColor = { r: data[0], g: data[1], b: data[2] };
            
            // Make similar colors transparent (threshold-based)
            const threshold = 40;
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];
                
                const diff = Math.abs(r - bgColor.r) + Math.abs(g - bgColor.g) + Math.abs(b - bgColor.b);
                
                if (diff < threshold) {
                    data[i + 3] = 0; // Make transparent
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
        }

        function applyColorBg(ctx, canvas) {
            const color = document.getElementById('bgColor').value;
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            // Convert hex to RGB
            const hex = color.replace('#', '');
            const newR = parseInt(hex.substr(0, 2), 16);
            const newG = parseInt(hex.substr(2, 2), 16);
            const newB = parseInt(hex.substr(4, 2), 16);
            
            let bgColor = { r: data[0], g: data[1], b: data[2] };
            const threshold = 40;
            
            // Replace background color
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];
                
                const diff = Math.abs(r - bgColor.r) + Math.abs(g - bgColor.g) + Math.abs(b - bgColor.b);
                
                if (diff < threshold) {
                    data[i] = newR;
                    data[i + 1] = newG;
                    data[i + 2] = newB;
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
        }

        function applyBlurBg(ctx, canvas) {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            const tempData = new Uint8ClampedArray(data);
            
            let bgColor = { r: data[0], g: data[1], b: data[2] };
            const threshold = 40;
            const blurRadius = 10;
            
            // Simple box blur on background pixels
            for (let y = 0; y < canvas.height; y++) {
                for (let x = 0; x < canvas.width; x++) {
                    const i = (y * canvas.width + x) * 4;
                    const r = tempData[i];
                    const g = tempData[i + 1];
                    const b = tempData[i + 2];
                    
                    const diff = Math.abs(r - bgColor.r) + Math.abs(g - bgColor.g) + Math.abs(b - bgColor.b);
                    
                    if (diff < threshold) {
                        // Blur this pixel
                        let sumR = 0, sumG = 0, sumB = 0, count = 0;
                        
                        for (let dy = -blurRadius; dy <= blurRadius; dy++) {
                            for (let dx = -blurRadius; dx <= blurRadius; dx++) {
                                const nx = x + dx;
                                const ny = y + dy;
                                
                                if (nx >= 0 && nx < canvas.width && ny >= 0 && ny < canvas.height) {
                                    const ni = (ny * canvas.width + nx) * 4;
                                    sumR += tempData[ni];
                                    sumG += tempData[ni + 1];
                                    sumB += tempData[ni + 2];
                                    count++;
                                }
                            }
                        }
                        
                        data[i] = sumR / count;
                        data[i + 1] = sumG / count;
                        data[i + 2] = sumB / count;
                    }
                }
            }
            
            ctx.putImageData(imageData, 0, 0);
        }

        downloadBgBtn.addEventListener('click', () => {
            const url = processedCanvas.toDataURL('image/png');
            const a = document.createElement('a');
            a.href = url;
            a.download = 'processed-image.png';
            a.click();
        });

        // Utility function
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        // ===== TOOL 4-10: ADDITIONAL TOOLS =====
        // Tool 4: Image Optimizer
        const dropZone4 = document.getElementById('dropZone4');
        const fileInput4 = document.getElementById('fileInput4');
        const fileList4 = document.getElementById('fileList4');
        const optimizerOptions = document.getElementById('optimizerOptions');
        const quality = document.getElementById('quality');
        const qualityValue = document.getElementById('qualityValue');
        const optimizeBtn = document.getElementById('optimizeBtn');
        const optimizerResults = document.getElementById('optimizerResults');

        setupDropZone(dropZone4, fileInput4, (files) => {
            uploadedFiles4 = Array.from(files).filter(f => f.type.startsWith('image/'));
            if (uploadedFiles4.length > 0) {
                fileList4.classList.remove('hidden');
                fileList4.innerHTML = `<h3 class="card-title">${uploadedFiles4.length} image(s) selected</h3>`;
                optimizerOptions.classList.remove('hidden');
            }
        });

        quality.addEventListener('input', () => {
            qualityValue.textContent = quality.value;
        });

        let optimizedImages = [];

        optimizeBtn.addEventListener('click', async () => {
            if (uploadedFiles4.length === 0) return;
            
            optimizerResults.classList.remove('hidden');
            optimizerResults.innerHTML = '<div class="message message-info">Processing images...</div>';
            
            optimizedImages = [];
            const targetWidth = parseInt(document.getElementById('resizeWidth').value) || null;
            const targetHeight = parseInt(document.getElementById('resizeHeight').value) || null;
            const qualityPercent = quality.value / 100;
            
            for (let file of uploadedFiles4) {
                const optimized = await optimizeImage(file, targetWidth, targetHeight, qualityPercent);
                optimizedImages.push(optimized);
            }
            
            const totalOriginal = uploadedFiles4.reduce((sum, f) => sum + f.size, 0);
            const totalOptimized = optimizedImages.reduce((sum, img) => sum + img.size, 0);
            const savings = ((totalOriginal - totalOptimized) / totalOriginal * 100).toFixed(1);
            
            optimizerResults.innerHTML = `
                <div class="message message-success">‚úì ${uploadedFiles4.length} image(s) optimized!</div>
                <div class="summary">
                    Original: ${formatFileSize(totalOriginal)} ‚Üí Optimized: ${formatFileSize(totalOptimized)}<br>
                    Space saved: ${savings}%
                </div>
                <button class="btn btn-success btn-full mt-20" onclick="downloadOptimizedImages()">‚¨á Download All Optimized</button>
            `;
        });

        async function optimizeImage(file, targetWidth, targetHeight, quality) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    let width = img.width;
                    let height = img.height;
                    
                    if (targetWidth && targetHeight) {
                        width = targetWidth;
                        height = targetHeight;
                    } else if (targetWidth) {
                        width = targetWidth;
                        height = (img.height / img.width) * targetWidth;
                    } else if (targetHeight) {
                        height = targetHeight;
                        width = (img.width / img.height) * targetHeight;
                    }
                    
                    canvas.width = width;
                    canvas.height = height;
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    canvas.toBlob((blob) => {
                        const optimizedFile = new File([blob], file.name, { type: 'image/jpeg' });
                        resolve(optimizedFile);
                    }, 'image/jpeg', quality);
                };
                img.src = URL.createObjectURL(file);
            });
        }

        window.downloadOptimizedImages = function() {
            optimizedImages.forEach((file, index) => {
                const url = URL.createObjectURL(file);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'optimized_' + uploadedFiles4[index].name;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
        };

        // Tool 5: PDF Merger
        const dropZone5 = document.getElementById('dropZone5');
        const fileInput5 = document.getElementById('fileInput5');
        const fileList5 = document.getElementById('fileList5');
        const mergePdfBtn = document.getElementById('mergePdfBtn');
        const pdfResults = document.getElementById('pdfResults');

        setupDropZone(dropZone5, fileInput5, (files) => {
            uploadedFiles5 = Array.from(files);
            if (uploadedFiles5.length > 0) {
                fileList5.classList.remove('hidden');
                fileList5.innerHTML = `<h3 class="card-title">${uploadedFiles5.length} file(s) ready to merge</h3>`;
            }
        });

        let mergedPdfBlob = null;

        mergePdfBtn.addEventListener('click', async () => {
            if (uploadedFiles5.length === 0) {
                alert('Please upload files first!');
                return;
            }
            
            mergePdfBtn.disabled = true;
            mergePdfBtn.innerHTML = '<div class="loading-spinner"></div> Merging...';
            
            try {
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF();
                let pageAdded = false;
                
                for (let i = 0; i < uploadedFiles5.length; i++) {
                    const file = uploadedFiles5[i];
                    
                    if (file.type.startsWith('image/')) {
                        const imgData = await readFileAsDataURL(file);
                        
                        if (pageAdded) pdf.addPage();
                        
                        const img = await loadImage(imgData);
                        const pageWidth = pdf.internal.pageSize.getWidth();
                        const pageHeight = pdf.internal.pageSize.getHeight();
                        const ratio = Math.min(pageWidth / img.width, pageHeight / img.height);
                        const w = img.width * ratio;
                        const h = img.height * ratio;
                        const x = (pageWidth - w) / 2;
                        const y = (pageHeight - h) / 2;
                        
                        pdf.addImage(imgData, 'JPEG', x, y, w, h);
                        pageAdded = true;
                    }
                }
                
                if (!pageAdded) {
                    pdf.text('No images to merge', 10, 10);
                }
                
                mergedPdfBlob = pdf.output('blob');
                pdfResults.classList.remove('hidden');
            } catch (error) {
                alert('Error merging PDF: ' + error.message);
            }
            
            mergePdfBtn.disabled = false;
            mergePdfBtn.textContent = 'Merge to PDF';
        });

        function loadImage(src) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => resolve(img);
                img.src = src;
            });
        }

        document.getElementById('downloadPdfBtn').addEventListener('click', () => {
            if (mergedPdfBlob) {
                const url = URL.createObjectURL(mergedPdfBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'merged_' + Date.now() + '.pdf';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }
        });

        // Tool 6: Text Converter
        const convertTextBtn = document.getElementById('convertTextBtn');
        const textInput = document.getElementById('textInput');
        const textOutput = document.getElementById('textOutput');
        const textResult = document.getElementById('textResult');

        convertTextBtn.addEventListener('click', () => {
            const input = textInput.value.trim();
            if (!input) {
                alert('Please enter text to convert!');
                return;
            }
            
            const from = document.getElementById('textFrom').value;
            const to = document.getElementById('textTo').value;
            
            let result = '';
            try {
                // Parse input
                let data;
                if (from === 'json') {
                    data = JSON.parse(input);
                } else if (from === 'csv') {
                    data = parseCSV(input);
                } else if (from === 'xml') {
                    data = parseXML(input);
                } else {
                    data = { text: input };
                }
                
                // Convert to output
                if (to === 'json') {
                    result = JSON.stringify(data, null, 2);
                } else if (to === 'csv') {
                    result = toCSV(data);
                } else if (to === 'xml') {
                    result = toXML(data);
                } else {
                    result = JSON.stringify(data, null, 2);
                }
                
                textResult.value = result;
                textOutput.classList.remove('hidden');
            } catch (e) {
                alert('Conversion error: ' + e.message);
            }
        });

        function parseCSV(csv) {
            const lines = csv.trim().split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',').map(v => v.trim());
                const obj = {};
                headers.forEach((header, index) => {
                    obj[header] = values[index] || '';
                });
                data.push(obj);
            }
            
            return data;
        }

        function toCSV(data) {
            if (Array.isArray(data) && data.length > 0) {
                const headers = Object.keys(data[0]);
                let csv = headers.join(',') + '\n';
                
                data.forEach(row => {
                    csv += headers.map(h => row[h] || '').join(',') + '\n';
                });
                
                return csv;
            }
            return JSON.stringify(data);
        }

        function parseXML(xml) {
            const parser = new DOMParser();
            const doc = parser.parseFromString(xml, 'text/xml');
            return xmlToJson(doc.documentElement);
        }

        function xmlToJson(xml) {
            const obj = {};
            
            if (xml.nodeType === 1) {
                if (xml.attributes.length > 0) {
                    obj['@attributes'] = {};
                    for (let j = 0; j < xml.attributes.length; j++) {
                        const attribute = xml.attributes.item(j);
                        obj['@attributes'][attribute.nodeName] = attribute.nodeValue;
                    }
                }
            } else if (xml.nodeType === 3) {
                obj.text = xml.nodeValue;
            }
            
            if (xml.hasChildNodes()) {
                for (let i = 0; i < xml.childNodes.length; i++) {
                    const item = xml.childNodes.item(i);
                    const nodeName = item.nodeName;
                    
                    if (typeof obj[nodeName] === 'undefined') {
                        obj[nodeName] = xmlToJson(item);
                    } else {
                        if (!Array.isArray(obj[nodeName])) {
                            obj[nodeName] = [obj[nodeName]];
                        }
                        obj[nodeName].push(xmlToJson(item));
                    }
                }
            }
            
            return obj;
        }

        function toXML(data, rootName = 'root') {
            let xml = '<?xml version="1.0" encoding="UTF-8"?>\n';
            xml += objectToXML(data, rootName);
            return xml;
        }

        function objectToXML(obj, nodeName) {
            let xml = '<' + nodeName + '>';
            
            if (typeof obj === 'object' && obj !== null) {
                if (Array.isArray(obj)) {
                    obj.forEach((item, index) => {
                        xml += objectToXML(item, 'item');
                    });
                } else {
                    Object.keys(obj).forEach(key => {
                        if (key !== '@attributes') {
                            xml += objectToXML(obj[key], key);
                        }
                    });
                }
            } else {
                xml += obj;
            }
            
            xml += '</' + nodeName + '>';
            return xml;
        }

        document.getElementById('downloadTextBtn').addEventListener('click', () => {
            const text = textResult.value;
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'converted.' + document.getElementById('textTo').value;
            a.click();
            URL.revokeObjectURL(url);
        });

        // Tool 7: Watermark
        const dropZone7 = document.getElementById('dropZone7');
        const fileInput7 = document.getElementById('fileInput7');
        const fileList7 = document.getElementById('fileList7');
        const watermarkOptions = document.getElementById('watermarkOptions');
        const watermarkOpacity = document.getElementById('watermarkOpacity');
        const opacityValue = document.getElementById('opacityValue');

        setupDropZone(dropZone7, fileInput7, (files) => {
            uploadedFiles7 = Array.from(files).filter(f => f.type.startsWith('image/'));
            if (uploadedFiles7.length > 0) {
                fileList7.classList.remove('hidden');
                fileList7.innerHTML = `<h3 class="card-title">${uploadedFiles7.length} image(s) selected</h3>`;
                watermarkOptions.classList.remove('hidden');
            }
        });

        watermarkOpacity.addEventListener('input', () => {
            opacityValue.textContent = watermarkOpacity.value;
        });

        let watermarkedImages = [];

        document.getElementById('applyWatermarkBtn').addEventListener('click', async () => {
            const text = document.getElementById('watermarkText').value;
            if (!text || uploadedFiles7.length === 0) {
                alert('Please provide watermark text and upload images!');
                return;
            }
            
            const results = document.getElementById('watermarkResults');
            results.classList.remove('hidden');
            results.innerHTML = '<div class="message message-info">Applying watermarks...</div>';
            
            watermarkedImages = [];
            const position = document.getElementById('watermarkPos').value;
            const opacity = document.getElementById('watermarkOpacity').value / 100;
            
            for (let file of uploadedFiles7) {
                const watermarked = await applyWatermark(file, text, position, opacity);
                watermarkedImages.push(watermarked);
            }
            
            results.innerHTML = `
                <div class="message message-success">‚úì Watermark applied to ${uploadedFiles7.length} image(s)!</div>
                <button class="btn btn-success btn-full mt-20" onclick="downloadWatermarkedImages()">‚¨á Download All</button>
            `;
        });

        async function applyWatermark(file, text, position, opacity) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    canvas.width = img.width;
                    canvas.height = img.height;
                    
                    ctx.drawImage(img, 0, 0);
                    
                    // Configure watermark
                    ctx.globalAlpha = opacity;
                    ctx.fillStyle = 'white';
                    ctx.strokeStyle = 'black';
                    ctx.lineWidth = 2;
                    ctx.font = `${Math.max(20, img.width / 25)}px Arial`;
                    
                    const textWidth = ctx.measureText(text).width;
                    const padding = 20;
                    
                    let x, y;
                    switch (position) {
                        case 'top-left':
                            x = padding;
                            y = padding + 20;
                            break;
                        case 'top-right':
                            x = canvas.width - textWidth - padding;
                            y = padding + 20;
                            break;
                        case 'bottom-left':
                            x = padding;
                            y = canvas.height - padding;
                            break;
                        case 'bottom-right':
                            x = canvas.width - textWidth - padding;
                            y = canvas.height - padding;
                            break;
                        case 'center':
                            x = (canvas.width - textWidth) / 2;
                            y = canvas.height / 2;
                            break;
                    }
                    
                    ctx.strokeText(text, x, y);
                    ctx.fillText(text, x, y);
                    
                    canvas.toBlob((blob) => {
                        const watermarkedFile = new File([blob], 'watermarked_' + file.name, { type: 'image/png' });
                        resolve(watermarkedFile);
                    }, 'image/png');
                };
                img.src = URL.createObjectURL(file);
            });
        }

        window.downloadWatermarkedImages = function() {
            watermarkedImages.forEach((file) => {
                const url = URL.createObjectURL(file);
                const a = document.createElement('a');
                a.href = url;
                a.download = file.name;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });
        };

        // Tool 8: Duplicate Finder
        const dropZone8 = document.getElementById('dropZone8');
        const fileInput8 = document.getElementById('fileInput8');
        const fileList8 = document.getElementById('fileList8');
        const findDuplicatesBtn = document.getElementById('findDuplicatesBtn');
        const duplicateResults = document.getElementById('duplicateResults');

        setupDropZone(dropZone8, fileInput8, (files) => {
            uploadedFiles8 = Array.from(files);
            if (uploadedFiles8.length > 0) {
                fileList8.classList.remove('hidden');
                fileList8.innerHTML = `<h3 class="card-title">${uploadedFiles8.length} file(s) uploaded</h3>`;
            }
        });

        findDuplicatesBtn.addEventListener('click', async () => {
            if (uploadedFiles8.length === 0) {
                alert('Please upload files first!');
                return;
            }
            
            duplicateResults.classList.remove('hidden');
            duplicateResults.innerHTML = '<div class="message message-info">Analyzing files...</div>';
            
            await new Promise(resolve => setTimeout(resolve, 500));
            
            const fileGroups = {};
            const duplicateGroups = [];
            
            // Group by name and size
            for (let file of uploadedFiles8) {
                const key = `${file.name}_${file.size}`;
                if (!fileGroups[key]) {
                    fileGroups[key] = [];
                }
                fileGroups[key].push(file);
            }
            
            // Find name duplicates
            const nameMap = {};
            const nameDuplicates = [];
            uploadedFiles8.forEach(file => {
                if (nameMap[file.name]) {
                    if (!nameDuplicates.includes(file.name)) {
                        nameDuplicates.push(file.name);
                    }
                } else {
                    nameMap[file.name] = file;
                }
            });
            
            // Find size duplicates
            const sizeMap = {};
            const sizeDuplicates = [];
            uploadedFiles8.forEach(file => {
                const sizeKey = file.size.toString();
                if (sizeMap[sizeKey]) {
                    sizeDuplicates.push({ name: file.name, size: file.size, duplicate: sizeMap[sizeKey].name });
                } else {
                    sizeMap[sizeKey] = file;
                }
            });
            
            let html = '<h3 class="card-title">üîç Duplicate Analysis Results</h3>';
            
            if (nameDuplicates.length > 0) {
                html += '<div class="message message-warning">‚ö† Found ' + nameDuplicates.length + ' file(s) with duplicate names:</div>';
                nameDuplicates.forEach(name => {
                    html += '<div class="file-item"><div>üìÑ ' + name + '</div></div>';
                });
            }
            
            if (sizeDuplicates.length > 0) {
                html += '<div class="message message-info" style="margin-top: 15px;">‚Ñπ Found ' + sizeDuplicates.length + ' file(s) with same size:</div>';
                sizeDuplicates.forEach(dup => {
                    html += '<div class="file-item"><div>' + dup.name + ' (size matches ' + dup.duplicate + ')</div></div>';
                });
            }
            
            if (nameDuplicates.length === 0 && sizeDuplicates.length === 0) {
                html += '<div class="message message-success">‚úì No duplicates found! All files are unique.</div>';
            }
            
            html += '<div class="summary" style="margin-top: 20px;">';
            html += 'Total files analyzed: ' + uploadedFiles8.length + '<br>';
            html += 'Name duplicates: ' + nameDuplicates.length + '<br>';
            html += 'Size matches: ' + sizeDuplicates.length;
            html += '</div>';
            
            duplicateResults.innerHTML = html;
        });

        // Tool 9: File Comparison
        const compareBtn = document.getElementById('compareBtn');
        const comparisonResults = document.getElementById('comparisonResults');

        compareBtn.addEventListener('click', () => {
            const file1 = document.getElementById('compareFile1').value;
            const file2 = document.getElementById('compareFile2').value;
            
            if (!file1 || !file2) {
                alert('Please enter content in both fields!');
                return;
            }
            
            const lines1 = file1.split('\n');
            const lines2 = file2.split('\n');
            
            let added = 0, removed = 0, modified = 0, same = 0;
            const maxLines = Math.max(lines1.length, lines2.length);
            
            let diffHtml = '<h3 class="card-title">‚öñÔ∏è Line-by-Line Comparison</h3>';
            diffHtml += '<div style="max-height: 400px; overflow-y: auto; border: 1px solid #E0E0E0; border-radius: 8px; padding: 15px; background: #FAFAFA; font-family: monospace; font-size: 0.9rem;">';
            
            for (let i = 0; i < maxLines; i++) {
                const line1 = lines1[i];
                const line2 = lines2[i];
                
                if (line1 === undefined && line2 !== undefined) {
                    // Line added in file 2
                    diffHtml += `<div style="background: #D4EDDA; padding: 5px; margin: 2px 0; border-left: 3px solid #28A745;">+ Line ${i + 1}: ${escapeHtml(line2)}</div>`;
                    added++;
                } else if (line1 !== undefined && line2 === undefined) {
                    // Line removed in file 2
                    diffHtml += `<div style="background: #F8D7DA; padding: 5px; margin: 2px 0; border-left: 3px solid #DC3545;">- Line ${i + 1}: ${escapeHtml(line1)}</div>`;
                    removed++;
                } else if (line1 !== line2) {
                    // Line modified
                    diffHtml += `<div style="background: #FFF3CD; padding: 5px; margin: 2px 0; border-left: 3px solid #FFC107;">~ Line ${i + 1}:<br>&nbsp;&nbsp;File 1: ${escapeHtml(line1)}<br>&nbsp;&nbsp;File 2: ${escapeHtml(line2)}</div>`;
                    modified++;
                } else {
                    // Line same
                    diffHtml += `<div style="padding: 5px; margin: 2px 0; color: #999;">&nbsp; Line ${i + 1}: ${escapeHtml(line1)}</div>`;
                    same++;
                }
            }
            
            diffHtml += '</div>';
            
            comparisonResults.classList.remove('hidden');
            comparisonResults.innerHTML = `
                <div class="message message-info">
                    üìä Comparison Statistics:<br>
                    Total lines (File 1): ${lines1.length}<br>
                    Total lines (File 2): ${lines2.length}<br>
                    <span style="color: #28A745;">+ Added: ${added} line(s)</span><br>
                    <span style="color: #DC3545;">- Removed: ${removed} line(s)</span><br>
                    <span style="color: #FFC107;">~ Modified: ${modified} line(s)</span><br>
                    <span style="color: #666;">= Identical: ${same} line(s)</span>
                </div>
                ${diffHtml}
            `;
        });

        function escapeHtml(text) {
            if (!text) return '';
            return text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
        }

        // Tool 10: Metadata Extractor
        const dropZone10 = document.getElementById('dropZone10');
        const fileInput10 = document.getElementById('fileInput10');
        const metadataResults = document.getElementById('metadataResults');

        setupDropZone(dropZone10, fileInput10, async (files) => {
            if (files.length > 0) {
                const file = files[0];
                const ext = getFileExtension(file.name);
                
                metadataResults.classList.remove('hidden');
                metadataResults.innerHTML = '<div class="message message-info">Extracting metadata...</div>';
                
                await new Promise(resolve => setTimeout(resolve, 300));
                
                let html = '<h3 class="card-title">üè∑Ô∏è File Metadata</h3>';
                
                // Basic metadata
                html += `
                    <div class="file-item"><div><strong>üìÑ File Name:</strong> ${file.name}</div></div>
                    <div class="file-item"><div><strong>üì¶ File Size:</strong> ${formatFileSize(file.size)}</div></div>
                    <div class="file-item"><div><strong>üè∑Ô∏è MIME Type:</strong> ${file.type || 'Unknown'}</div></div>
                    <div class="file-item"><div><strong>üìÅ Extension:</strong> ${ext}</div></div>
                    <div class="file-item"><div><strong>üïê Last Modified:</strong> ${new Date(file.lastModified).toLocaleString()}</div></div>
                `;
                
                // Image-specific metadata
                if (file.type.startsWith('image/')) {
                    const imageData = await extractImageMetadata(file);
                    html += '<h4 style="margin-top: 20px; color: #0066CC;">üñºÔ∏è Image Properties</h4>';
                    html += `
                        <div class="file-item"><div><strong>Width:</strong> ${imageData.width} px</div></div>
                        <div class="file-item"><div><strong>Height:</strong> ${imageData.height} px</div></div>
                        <div class="file-item"><div><strong>Aspect Ratio:</strong> ${imageData.aspectRatio}</div></div>
                        <div class="file-item"><div><strong>Total Pixels:</strong> ${(imageData.width * imageData.height).toLocaleString()}</div></div>
                    `;
                }
                
                // Text file metadata
                if (file.type.startsWith('text/') || ext === '.txt' || ext === '.csv' || ext === '.json') {
                    const textData = await extractTextMetadata(file);
                    html += '<h4 style="margin-top: 20px; color: #0066CC;">üìù Text Properties</h4>';
                    html += `
                        <div class="file-item"><div><strong>Characters:</strong> ${textData.chars.toLocaleString()}</div></div>
                        <div class="file-item"><div><strong>Words:</strong> ${textData.words.toLocaleString()}</div></div>
                        <div class="file-item"><div><strong>Lines:</strong> ${textData.lines.toLocaleString()}</div></div>
                        <div class="file-item"><div><strong>Encoding:</strong> UTF-8 (assumed)</div></div>
                    `;
                }
                
                // Export options
                html += `
                    <div class="btn-group" style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="downloadMetadataJSON('${file.name}', ${file.size}, '${file.type}', '${ext}', ${file.lastModified})">‚¨á Export as JSON</button>
                        <button class="btn btn-secondary" onclick="downloadMetadataCSV('${file.name}', ${file.size}, '${file.type}', '${ext}', ${file.lastModified})">‚¨á Export as CSV</button>
                    </div>
                `;
                
                metadataResults.innerHTML = html;
            }
        });

        async function extractImageMetadata(file) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => {
                    resolve({
                        width: img.width,
                        height: img.height,
                        aspectRatio: (img.width / img.height).toFixed(2)
                    });
                };
                img.src = URL.createObjectURL(file);
            });
        }

        async function extractTextMetadata(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const text = e.target.result;
                    const chars = text.length;
                    const words = text.split(/\s+/).filter(w => w.length > 0).length;
                    const lines = text.split('\n').length;
                    resolve({ chars, words, lines });
                };
                reader.readAsText(file);
            });
        }

        window.downloadMetadataJSON = function(name, size, type, ext, modified) {
            const metadata = {
                fileName: name,
                fileSize: size,
                fileSizeFormatted: formatFileSize(size),
                mimeType: type,
                extension: ext,
                lastModified: new Date(modified).toISOString(),
                extractedAt: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(metadata, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'metadata_' + name + '.json';
            a.click();
            URL.revokeObjectURL(url);
        };

        window.downloadMetadataCSV = function(name, size, type, ext, modified) {
            const csv = 'Property,Value\n' +
                `File Name,${name}\n` +
                `File Size,${formatFileSize(size)}\n` +
                `MIME Type,${type}\n` +
                `Extension,${ext}\n` +
                `Last Modified,${new Date(modified).toLocaleString()}\n` +
                `Extracted At,${new Date().toLocaleString()}`;
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'metadata_' + name + '.csv';
            a.click();
            URL.revokeObjectURL(url);
        };
    </script>
</body>
</html>